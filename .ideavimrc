" basic stuff
set hlsearch
set scrolloff=3
set ignorecase smartcase
set showmode
set history=1000
set incsearch
set clipboard+=unnamed

" extensions
set surround
set multiple-cursors

" register leader
let mapleader = " "

" After block yank and paste, move cursor to the end of operated text and don't override register
vnoremap y y`]
vnoremap p "_dP`]
nnoremap p p`]

" Yank and paste from clipboard
nnoremap ,y "+y
vnoremap ,y "+y
nnoremap ,yy "+yy
nnoremap ,p "+p

" have x (removes single character) not go into the default registry
nnoremap x "_x
" Make X an operator that removes without placing text in the default registry
nmap X "_d
nmap XX "_dd
vmap X "_d
vmap x "_d

" don't yank to default register when changing something
nnoremap c "xc
xnoremap c "xc

" Change line, better use S for this.
nmap cc 1S

" Copy Word
nmap ,c yiw

" Reselect last-pasted text
nnoremap gp `[v`]

" Center screen when jumping to next match
nnoremap n nzz
nnoremap N Nzz
vnoremap n nzz
vnoremap N Nzz

" Center screen when moving up and down
nnoremap <C-u> <C-u>zz
nnoremap <C-o> <C-d>zz
vnoremap <C-u> <C-u>zz
vnoremap <C-o> <C-d>zz

" easy window navigation
nnoremap <a-k> gT
nnoremap <a-j> gt
nnoremap <c-s-tab> gT
nnoremap <c-tab> gt

" clear the search buffer when hitting return
nnoremap <leader><cr> :nohlsearch<cr>

" code Refactoring
nnoremap <leader>rr :action RenameElement<cr>

" comment out
nnoremap <leader>r :action CommentByLineComment<cr>
vnoremap <leader>t :action CommentByBlockComment<cr>

" press `f` to activate AceJump
map ff :action AceAction<cr>
" press `F` to activate Target Mode
map ft :action AceTargetAction<cr>
" press `g` to activate Line Mode
map fl :action AceLineAction<cr>

" code navigation
nnoremap <leader>j :action MethodUp<cr>
nnoremap <leader>k :action MethodDown<cr>
nnoremap <leader>l :action HighlightUsagesInFile<cr>
nnoremap <leader>f {
nnoremap <leader>d }

" split
nnoremap <leader>q :action PrevSplitter<cr>
nnoremap <leader>e :action NextSplitter<cr>
nnoremap <leader>p :action SplitHorizontally<cr>
nnoremap <leader>o :action SplitVertically<cr>

" built-in navigation to navigated items works better
nnoremap <c-o> :action Back<cr>
nnoremap <c-i> :action Forward<cr>

" but preserve ideavim defaults
nnoremap g<c-o> <c-o>
nnoremap g<c-i> <c-i>

" reactivate some IDEA shortcuts
nnoremap <c-n> :action SearchEverywhere<cr>
nnoremap <c-b> :action ShowUsages<cr>
nnoremap <c-s> :action SaveAll<cr>
nnoremap <c-q> :action CloseEditor<cr>
nnoremap <c-c> :action GotoImplementation<cr>